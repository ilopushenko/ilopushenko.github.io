<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> Polarization state | Ivan Lopushenko </title> <meta name="author" content="Ivan Lopushenko"> <meta name="description" content="Calculator of the polarization ellipse parameters and other data obtainable from the user-defined Stokes vector."> <meta name="keywords" content="modeling, simulation, physics, mathematics, education"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="https://unpkg.com/bootstrap-table@1.22.1/dist/bootstrap-table.min.css"> <link rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons"> <link rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%E2%9A%9B%EF%B8%8F&lt;/text&gt;&lt;/svg&gt;"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://ilopushenko.github.io//projects/stokes"> <link rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script src="/assets/js/theme.js?bf50d6d9dd867d3e0f3b0add94449649"></script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> <span class="font-weight-bold">Ivan </span> Lopushenko </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">about </a> </li> <li class="nav-item active"> <a class="nav-link" href="/projects/">tools <span class="sr-only">(current)</span> </a> </li> <li class="nav-item "> <a class="nav-link" href="/publications/">publications </a> </li> <li class="nav-item "> <a class="nav-link" href="/teaching/">teaching </a> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="fa-solid fa-moon"></i> <i class="fa-solid fa-sun"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5" role="main"> <div class="post"> <header class="post-header"> <h1 class="post-title">Polarization state</h1> <p class="post-description">Calculator of the polarization ellipse parameters and other data obtainable from the user-defined Stokes vector.</p> </header> <article> <script async="" type="text/javascript" src="/wasm/wasm_StokesLibrary.js"></script> <script>var Module={onRuntimeInitialized:function(){Module._wasm_StokesLibrary_initialize(),Module._wasm_initStokesObject()}};</script> <script src="https://cdn.plot.ly/plotly-latest.min.js"></script> <p>This is a small app to compute and visualize parameters of either fully or partially polarized light from the supplied Stokes vector \(S=[S_0, S_1, S_2, S_3]^T=[I, Q, U, V]^T\). Source code for the underlying MATLAB® class will be available on GitHub and MATLAB Exchange. </p> <p>In the following, we fully comply with <a href="#further-reading">M. Born and E. Wolf (1980)</a>, sections §1.4 and §10.8. For more details, please refer to these chapters or see theoretical reference at the bottom of the page.</p> <p>Some short remarks before you begin working with the app:</p> <div id="showBtnLoadDemo"></div> <p></p> <ul> <li>Input are Stokes vector values (can be power in e.g. [W/m<sup>2</sup>], or in normalized dimensionless units). The main rule is that relations \(S_0^2\geq S_1^2+S_2^2+S_3^2\) and \(S_0\geq0\) must always hold;</li> <li>Several input vectors can be provided to compare them;</li> <li>Primary outputs are degrees of polarization and parameters of the polarization ellipse;</li> <li>Additional outputs are 6 intensity values \(I_H, I_V, I_D, I_A, I_R, I_L\) (accessible via tab switch below) and normalized Stokes vector values (accessible via Poincaré sphere);</li> <li>Computed ellipse and Poincaré sphere depiction of the \(S\) vector are presented on 2D and 3D plots below. </li> </ul> <div align="right"> <button class="btn btn-info btn-sm" onclick="loadDemoData()">Load demo data</button> <button class="btn btn-danger btn-sm" onclick="resetData()">Reset data</button> </div> <div class="tab"> <div class="row"> <div class="col-sm"><button class="tablinks" onclick="openTab(event, 'ArbitraryStokes')" id="mainTab">Stokes vector</button></div> <div class="col-sm"><button class="tablinks" onclick="openTab(event, 'IntensityDiv')">Intensity values</button></div> </div> </div> <div id="ArbitraryStokes" class="tabcontent"> <form name="StokesCustom"> <table cellspacing="0" class="table-sm table-striped" width="100%" id="customStokesTable"> <thead> <tr> <th style="width:10%">ID</th> <th style="width:15%">$$S_0$$</th> <th style="width:15%">$$S_1$$</th> <th style="width:15%">$$S_2$$</th> <th style="width:15%">$$S_3$$</th> <th style="width:20%"></th> <th style="width:10%"></th> </tr> </thead> <tr style="display:none;"> <th style="width:10%"></th> <th style="width:15%"></th> <th style="width:15%"></th> <th style="width:15%"></th> <th style="width:15%"></th> <th style="width:20%"></th> <th style="width:10%"></th> </tr> </table> </form> </div> <div id="NormalizedStokes" class="tabcontent"> <form name="StokesNormalizedForm"> <table cellspacing="0" class="table-bordered table-sm table-striped" width="100%" id="normalizedStokesTable"> <thead> <tr> <th style="width:10%">ID</th> <th style="width:15%">Power</th> <th style="width:15%">$$DoP$$</th> <th style="width:15%">$$s_1$$</th> <th style="width:15%">$$s_2$$</th> <th style="width:15%">$$s_3$$</th> <th style="width:10%"></th> <th style="width:5%"></th> </tr> </thead> <tr style="display:none;"> <th style="width:10%"></th> <th style="width:15%"></th> <th style="width:15%"></th> <th style="width:15%"></th> <th style="width:15%"></th> <th style="width:15%"></th> <th style="width:10%"></th> <th style="width:5%"></th> </tr> </table> </form> </div> <div id="IntensityDiv" class="tabcontent"> <form name="IntensityForm"> <table cellspacing="0" class="table-striped table-condensed table-sm" width="100%" id="intensityTable"> <thead> <tr> <th style="width:10%">ID</th> <th style="width:15%">$$I_H$$</th> <th style="width:15%">$$I_V$$</th> <th style="width:15%">$$I_D$$</th> <th style="width:15%">$$I_A$$</th> <th style="width:15%">$$I_R$$</th> <th style="width:10%">$$I_L$$</th> <th style="width:5%"></th> </tr> </thead> <tr style="display:none;"> <th style="width:10%"></th> <th style="width:15%"></th> <th style="width:15%"></th> <th style="width:15%"></th> <th style="width:15%"></th> <th style="width:15%"></th> <th style="width:10%"></th> <th style="width:5%"></th> </tr> </table> </form> </div> <div id="CoherencyDiv" class="tabcontent"> <form name="CoherencyForm"> <table cellspacing="0" class="table-bordered table-sm table-striped" width="100%" id="coherencyTable"> <thead> <tr> <th style="width:10%">ID</th> <th style="width:50%">$$\mathbf{J}$$</th> <th style="width:20%"></th> <th style="width:20%"></th> </tr> </thead> <tr style="display:none;"> <th style="width:10%"></th> <th style="width:50%"></th> <th style="width:20%"></th> <th style="width:20%"></th> </tr> </table> </form> </div> <div class="caption">Attention: tabs are simultaneously updated with the latest submitted data. <br> Main results are returned in the table below.</div> <table cellspacing="0" class="table-bordered table-sm table-striped table-condensed" id="resultsTable"> <thead> <tr> <th style="width:10%">ID</th> <th style="width:10%">$$DoP$$</th> <th style="width:10%">$$DoLP$$</th> <th style="width:10%">$$DoCP$$</th> <th style="width:10%"><div class="row justify-content-center"> <div class="col-6">$$\mathrm{Azimuth}\:\psi$$</div> <div class="col-1" data-tooltip="$$0\leq\psi&lt;\pi$$">ⓘ</div> </div></th> <th style="width:10%"><div class="row justify-content-center"> <div class="col-6">$$\mathrm{Ellipticity}\:\chi$$</div> <div class="col-1" data-tooltip="$$-\pi/4\leq\chi\leq\pi/4$$">ⓘ</div> </div></th> <th style="width:10%"><div class="row justify-content-center"> <div class="col-1">$$\delta$$</div> <div class="col-1" data-tooltip="Phase difference">ⓘ</div> </div></th> <th style="width:10%" data-tooltip="$$0\leq\psi&lt;\pi$$">$$\mathrm{Helicity}$$</th> </tr> </thead> <tr style="display:none;"> <td style="width:10%"></td> <td style="width:10%"></td> <td style="width:10%"></td> <td style="width:10%"></td> <td style="width:10%"></td> <td style="width:10%"></td> <td style="width:10%"></td> <td style="width:10%"></td> </tr> </table> <p><br></p> <div class="row"> <div class="row"> <div class="col-sm"> <div id="ellipsePlot"></div> <br> <div class="caption">Figure 1. <a href="#showEllipseDefinition">Polarization ellipse</a> for each input beam.</div> </div> <div class="col-sm"> <div id="spherePlot"></div> <br> <div class="caption">Figure 2. Depiction of the normalized Stokes vector on the <a href="#showEllipseDefinition">Poincaré sphere</a>.</div> </div> </div> </div> <h2 id="theoretical-reference">Theoretical reference</h2> <h4 id="measurement-of-stokes-vector">Measurement of Stokes vector</h4> <p>Using polarizer-compensator configuration (experimental setup with e.g. <a href="https://en.wikipedia.org/wiki/Polarizer#Linear_polarizers" rel="external nofollow noopener" target="_blank">linear polarizer</a> and <a href="https://en.wikipedia.org/wiki/Waveplate#Quarter-wave_plate" rel="external nofollow noopener" target="_blank">quarter-wave plate</a>) it is possible to measure several possible <a href="https://en.wikipedia.org/wiki/Intensity_(physics)" rel="external nofollow noopener" target="_blank">intensity values</a> of the light beam: intensity of the horizontally polarized component \(I_H\), vertically polarized component \(I_V\), diagonally polarized component \(I_D\), antidiagonal component \(I_A\), right \(I_R\) and left \(I_L\) circularly polarized components. This is in agreement with <a href="#further-reading">Born and Wolf</a>, §10.8, Eqns. (10) and (64). If light is unpolarized, then all components are equal to each other.</p> <p>In the literature, there are several other notations for these intensity values, introduced by different authors with different backrounds and targeting different purposes. A good review is done by <a href="#further-reading">M. Mishchenko (2014)</a> and <a href="#further-reading">D. Goldstein (2011)</a>. Most notably, in the experimental configuration with polarizer and compensating waveplate one would usually use angles \(\theta\) and \(\varepsilon\) of their rotation in order to describe the measured intensities: \(I=I(\theta,\varepsilon)\). Then,</p> \[I_H=I(0,0), \:\: I_V=I\left(\dfrac{\pi}{2},0\right), \:\: I_D=I\left(\dfrac{\pi}{4},0\right), \:\: I_A=\left(\dfrac{3\pi}{4},0\right),\] \[I_R=I\left(\dfrac{\pi}{4},\dfrac{\pi}{2}\right), \:\: I_L=I\left(\dfrac{3\pi}{4},\dfrac{\pi}{2}\right).\] <p>Finally, Stokes vector can be computed as</p> \[S_0=I_H+I_V=I_D+I_A=I_R+I_L,\] \[S_1=I_H-I_V,\] \[S_2=I_D-I_A,\] \[S_3=I_R-I_L.\] <details><summary>Click here to know more</summary> <p>In fact, only 4 intensity measurements are enough to compute the Stokes vector. All modern polarimeters, commercial and in-house alike, both well-developed and prototyped with account for new technological advances, rely on these equations - in one way or another.</p> <blockquote class="block-warning"> <h5 id="warning">WARNING</h5> <p>In this app, currently there is no way to input intensity measurements. Right now, they are only recomputed from the Stokes vector provided by the user.</p> </blockquote> </details> <h4 id="degrees-of-polarization">Degrees of polarization</h4> <p>Partially polarized light is characterized by its degree of polarization (\(DoP\)), <a href="#further-reading">Born and Wolf</a>, §10.8, Eqn. (68):</p> \[DoP=\sqrt{S_1^2+S_2^2+S_3^2}/S_0.\] <p>In turn, it can be further decomposed into degrees of linear (\(DoLP\)) and circular (\(DoCP\)) polarization:</p> \[DoLP=\sqrt{S_1^2+S_2^2}/S_0,\] \[DoCP=\sqrt{S_3^2}/S_0=\vert S_3 \vert/S_0,\] \[DoP^2=DoLP^2 + DoCP^2.\] <p>Degrees of polarization are quite frequently employed in polarimetric applications. </p> <h4 id="polarization-ellipse-and-poincaré-sphere">Polarization ellipse and Poincaré sphere</h4> <p>Fully polarized light can be characterized with <a href="https://en.wikipedia.org/wiki/Polarization_(waves)#Polarization_ellipse" rel="external nofollow noopener" target="_blank">polarization ellipse</a>.</p> <blockquote class="block-tip"> <h5 id="tip">TIP</h5> <p>In case of the partially polarized light, this app plots polarization ellipse for the fully polarized component of light, which intensity is equal to \(\sqrt{S_1^2+S_2^2+S_3^2}\). Here, your data is not normalized in any way, and ellipses for all provided Stokes vectors are displayed with proper scale, which allows to compare them between each other both in terms of ellipse form and amplitudes of the underlying light waves.</p> </blockquote> <p>Each ellipse is a result of a superposition of two orthogonally linearly polarized waves with phase difference \(\delta\) between them. Assuming that we deal with plane time-harmonic wave propagating along \(z\) direction, the electromagnetic wave field is then described as \(\mathbf{E}=(E_x,E_y,0)\), <a href="#further-reading">Born and Wolf</a>, §1.4, Eqn. (12):</p> \[E_x = a_1 \cos{(\tau+\delta_1)}, \:\: E_y = a_2 \cos{(\tau+\delta_2)}, \:\: \tau=\omega t - \mathbf{kr}, \:\: \delta = \delta_2-\delta_1.\] <p>Here, amplitudes \(a_1\) and \(a_2\) of both orthogonally polarized light waves are introduced. We would allow ourselves not to comment upon all other variables, directing the inquiring reader to the given reference for further reading.</p> <div id="showEllipseDefinition"></div> <p>Depending on the amplitudes and phase difference, polarization ellipse can take different forms. Its axes are generally not parallel to either \(Ox\) or \(Oy\) of the Cartesian coordinate system, and can be rotated by azimuth angle \(\psi\) with respect to them (see Figure 3):</p> <div class="row"> <div class="row"> <div class="col-sm d-flex justify-content-center"> <img src="/assets/img/1_wasm_StokesVector/Polarisation_ellipse2.svg" class="img-fluid rounded z-depth-1" width="70%" height="auto" title="Polarization ellipse"> <div class="caption">Figure 3. Polarization ellipse and its parameters. Arrow corresponds to the helicity direction. Picture source: <a href="https://en.wikipedia.org/wiki/Polarization_(waves)#Polarization_ellipse" rel="external nofollow noopener" target="_blank">wiki</a>.</div> </div> <div class="col-sm d-flex justify-content-center"> <img src="/assets/img/1_wasm_StokesVector/Poincare_sphere.svg" class="img-fluid rounded z-depth-1" width="70%" height="auto" title="Poincaré sphere"> <div class="caption">Figure 4. Definition of the Poincaré sphere. Picture source: <a href="https://en.wikipedia.org/wiki/Unpolarized_light#Poincar%C3%A9_sphere" rel="external nofollow noopener" target="_blank">wiki</a>.</div> </div> </div> </div> <p>Larger \(a\) and smaller \(b\) ellipse semi-axes, as well as ellipticity \(\chi\) and azimuth \(\psi\) are related to Stokes vector in the following way, Born and Wolf §1.4, Eqns. (23),(32),(43),(45a)-(45c):</p> \[S_0=a_1^2+a_2^2=a^2+b^2,\] \[S_1=S_0\cos2\chi\cos2\psi,\] \[S_2=S_0\cos2\chi\sin2\psi,\] \[S_3=S_0\sin2\chi,\] \[\mathrm{tg}\chi=\mp b/a.\] <p>These relations, resembling <a href="https://en.wikipedia.org/wiki/Spherical_coordinate_system#Cartesian_coordinates" rel="external nofollow noopener" target="_blank">connection</a> between <a href="https://en.wikipedia.org/wiki/Cartesian_coordinate_system" rel="external nofollow noopener" target="_blank">Cartesian</a> and <a href="https://en.wikipedia.org/wiki/Spherical_coordinate_system" rel="external nofollow noopener" target="_blank">spherical</a> coordinate systems, allow to depict Stokes vector as point on the sphere. This depiction of the polarization state is known as <a href="https://en.wikipedia.org/wiki/Unpolarized_light#Poincar%C3%A9_sphere" rel="external nofollow noopener" target="_blank">Poincaré sphere</a>.</p> <p></p> <p>Obvious special cases are the so-called degenerate states of the polarization ellipse, which are available in the current tool via <a href="#showBtnLoadDemo">“Load demo data”</a> button. In particular, in the 1st degenerate state (Linear Horizontal Polarization, LHP) ellipse is reduced to the line aligning with \(Ox\) Cartesian axes, in the 2nd (Linear Vertical Polarization, LVP) - to the line aligning with \(Oy\) Cartesian axes, in the 3rd (linear diagonal polarization, L+45) and 4th (linear antidiagonal polarization L-45) - to the lines rotated at \(\psi_D=\pi/4\) and \(\psi_A=3\pi/4\), correspondingly, and finally, in 5th (right circular polarization, RCP) and 6th (left circular polarization, LCP) ellipse is reduced to the circle which one can follow either clockwise or counter-clockwise.</p> <h4 id="wolfs-coherency-matrix">Wolf’s coherency matrix</h4> <p>It is worth noting that Stokes parameters bijectively (one-to-one) correspond to the coherency matrix introduced by Emil Wolf and which can be referenced in Born and Wolf, §10.8, Eqn. (63). In turn, this matrix is directly related to the concept of density matrix in quantum description of light: Wolf’s matrix is in fact a density matrix of the single photon. This is an important connection between wave and quantum properties of light which manifests itself through polarization. In the source code of this app, elements of the Wolf’s coherency matrix are also evaluated, and there are plans on implementing web interface for the convenient coherency matrix analysis in this app - in the tab next to intensity values. For now, we conclude our short theoretical overview and provide all necessary references. </p> <h4 id="further-reading">Further reading</h4> <ol> <li> <a href="https://en.m.wikipedia.org/wiki/Principles_of_Optics#:~:text=Principles%20of%20Optics%2C%20colloquially%20known,in%201959%20by%20Pergamon%20Press" rel="external nofollow noopener" target="_blank">M. Born and E. Wolf. Principles of Optics, 6th Edition. Pergamon Press (1980).</a> </li> <li><a href="https://www.cambridge.org/9780521519922" rel="external nofollow noopener" target="_blank">M. I. Mishchenko. Electromagnetic Scattering by Particles and Particle Groups: An Introduction. Cambridge University Press (2014).</a></li> <li><a href="https://doi.org/10.1201/b10436" rel="external nofollow noopener" target="_blank">D. H. Goldstein. Polarized Light, 3rd Edition. CRC Press (2011).</a></li> <li>Wiki: numerous in-line references to Wikipedia articles all around this page.</li> <li><a href="https://se.mathworks.com/help/phased/ug/polarized-fields.html" rel="external nofollow noopener" target="_blank">MATLAB reference on polarization.</a></li> </ol> <p>In any of the provided web resources, I recommend to strongly beware of typos: unfortunately, these are still quite common in polarization-related articles even in help resources for the proprietary products. This is mostly connected to either sign uncertainty, chosen form of the harmonic wave time dependence, or to the different notations used by various authors to characterize polarization ellipse and other light parameters.</p> <h2 id="source-code-available-soon">Source code (available soon)</h2> <ul> <li>MATLAB Exchange</li> <li>GitHub</li> <li>Octave Online</li> </ul> <div class="caption">Polarization state calculator. Preview version 0.2, 04.03.2024. <br> This tool has been inspired by fundamental relation between polarization and quantum properties of light, and by processing of polarimetric measurements data at <a href="https://www.oulu.fi/en/research-groups/biophotonics" rel="external nofollow noopener" target="_blank">OPEM Unit</a> within <a href="https://ieeexplore.ieee.org/document/9622320" rel="external nofollow noopener" target="_blank">Academy of Finland</a> and <a href="https://www.sintef.no/en/projects/2022/metahilight/" rel="external nofollow noopener" target="_blank">MetaHiLight</a> projects. <br> Author warmly acknowledges support and feedback from colleagues and friends. <br> Built with <a href="https://www.mathworks.com/matlabcentral/fileexchange/69973-generatejavascriptusingmatlabcoder" rel="external nofollow noopener" target="_blank">MATLAB Coder and Emscripten</a>. Runs locally in the web browser with <a href="https://webassembly.org" rel="external nofollow noopener" target="_blank">WebAssembly</a>. </div> <style>.tooltipHovering{position:fixed;padding:10px 20px;border:1px solid #b3c9ce;border-radius:4px;text-align:center;font:italic 14px/1.3 sans-serif;color:var(--global-text-color);background:var(--global-bg-color);box-shadow:3px 3px 3px rgba(0,0,0,.3)}</style> <style>.tab{overflow:hidden;border:0;background-color:var(--global-card-bg-color);//margin:auto;float:left;width:50%;padding:10px}.tab button{background-color:inherit;float:left;border:0;outline:0;cursor:pointer;padding:14px 16px;transition:.3s;font-size:16px;color:var(--global-text-color)}.tab button:hover{background-color:var(--global-footer-text-color)}.tab button.active{background-color:var(--global-footer-text-color)}.tabcontent{display:none;padding:6px 12px;border:0;border-top:0}</style> <script>function openTab(e,t){var a,l,n;for(l=document.getElementsByClassName("tabcontent"),a=0;a<l.length;a++)l[a].style.display="none";for(n=document.getElementsByClassName("tablinks"),a=0;a<n.length;a++)n[a].className=n[a].className.replace(" active","");document.getElementById(t).style.display="block",e.currentTarget.className+=" active"}</script> <script>let tooltipElem;document.onmouseover=function(t){let o=t.target,e=o.dataset.tooltip;if(!e)return;(tooltipElem=document.createElement("div")).className="tooltipHovering",tooltipElem.id="tooltipWithFormula",tooltipElem.innerHTML=e,document.body.append(tooltipElem);let l=o.getBoundingClientRect(),i=l.left+o.offsetWidth+5;i<0&&(i=0);let n=l.top-tooltipElem.offsetHeight-5;n<0&&(n=l.top+o.offsetHeight+5),tooltipElem.style.left=i+"px",tooltipElem.style.top=n+"px";window.MathJax;node=document.getElementById("tooltipWithFormula"),MathJax.typeset([node])},document.onmouseout=function(){tooltipElem&&(tooltipElem.remove(),tooltipElem=null)};</script> <script>function determineHelicity(e){let t;return t=e>0?"Right":e<0?"Left":"Linear"}function deletePlaceholderRows(){document.getElementById("customStokesTable").deleteRow(1),document.getElementById("normalizedStokesTable").deleteRow(1),document.getElementById("intensityTable").deleteRow(1),document.getElementById("coherencyTable").deleteRow(1)}function updateRowIds(e){let t=e.rows;t.forEach(e=>{e.cells[0].innerHTML=e.rowIndex}),t[0].cells[0].innerHTML="ID","resultsTable"!=e.id&&(t[t.length-1].cells[0].innerHTML="")}function deleteRowAction(e){e.preventDefault();let t=e.target.closest("tr").rowIndex;if(2==document.getElementById("customStokesTable").rows.length)alert("Impossible to delete the only row present in the table: there must be at least one row with data.");else{document.getElementById("resultsTable").deleteRow(t),document.getElementById("customStokesTable").deleteRow(t),document.getElementById("normalizedStokesTable").deleteRow(t),document.getElementById("intensityTable").deleteRow(t),document.getElementById("coherencyTable").deleteRow(t),updateRowIds(document.getElementById("resultsTable")),updateRowIds(document.getElementById("customStokesTable")),updateRowIds(document.getElementById("normalizedStokesTable")),updateRowIds(document.getElementById("intensityTable")),updateRowIds(document.getElementById("coherencyTable")),Plotly.deleteTraces(ellipsePlot,t-1),Plotly.deleteTraces(spherePlot,t+1);let e,l,o=document.getElementById("resultsTable").rows.length-2;for(let t=0;t<o;t++)e={name:"id "+(l=t+1)},Plotly.restyle(ellipsePlot,e,t),Plotly.restyle(spherePlot,e,t+2);Module._wasm_removeSelectedData(t)}}function resetData(){for(let e=document.getElementById("resultsTable").rows.length-2;e>0;e--)document.getElementById("resultsTable").deleteRow(e),document.getElementById("customStokesTable").deleteRow(e),document.getElementById("normalizedStokesTable").deleteRow(e),document.getElementById("intensityTable").deleteRow(e),document.getElementById("coherencyTable").deleteRow(e),Module._wasm_removeSelectedData(e);initializeEllipsePlot(),initializeSpherePlot()}function loadDemoData(){StokesForm.S0.value=1,StokesForm.S1.value=1,StokesForm.S2.value=0,StokesForm.S3.value=0,document.getElementById("inputCustomStokes").click(),StokesForm.S0.value=1,StokesForm.S1.value=-1,StokesForm.S2.value=0,StokesForm.S3.value=0,document.getElementById("inputCustomStokes").click(),StokesForm.S0.value=1,StokesForm.S1.value=0,StokesForm.S2.value=1,StokesForm.S3.value=0,document.getElementById("inputCustomStokes").click(),StokesForm.S0.value=1,StokesForm.S1.value=0,StokesForm.S2.value=-1,StokesForm.S3.value=0,document.getElementById("inputCustomStokes").click(),StokesForm.S0.value=1,StokesForm.S1.value=0,StokesForm.S2.value=0,StokesForm.S3.value=1,document.getElementById("inputCustomStokes").click(),StokesForm.S0.value=1,StokesForm.S1.value=0,StokesForm.S2.value=0,StokesForm.S3.value=-1,document.getElementById("inputCustomStokes").click()}function initializeEllipsePlot(){let e={title:"Polarization Ellipse",autosize:!1,width:350,height:350,showlegend:!0,colorway:["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],xaxis:{},yaxis:{scaleanchor:"x"}};Plotly.newPlot(ellipsePlot,[],e,{scrollZoom:!0,displaylogo:!1,responsive:!0})}function initializeSpherePlot(){let e={title:"Poincar\xe9 Sphere",width:350,height:350,showlegend:!0,colorway:["#bcbd22","#17becf","#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f"],scene:{xaxis:{title:"x=s1"},yaxis:{title:"y=s2"},zaxis:{title:"z=s3"}}},t=computeSphere();Plotly.newPlot(spherePlot,t,e)}function computeSphere(){function e(e,t,l){for(var o=[],s=(t-e)/(l-1),n=0;n<l;n++)o.push(e+s*n);return o}for(a=[],b=[],c=[],phiArr=[],thetaArr=[],phiArr=e(0,Math.PI/2,20),thetaArr=e(0,2*Math.PI,20),i=0;i<thetaArr.length;i++)for(j=0;j<phiArr.length;j++)a.push(Math.cos(thetaArr[i])*Math.sin(phiArr[j])),b.push(Math.sin(thetaArr[i])*Math.sin(phiArr[j])),c.push(Math.cos(phiArr[j]));const t={opacity:.2,color:"rgb(211,211,211)",type:"mesh3d",x:a,y:b,z:c};return[t,{...t,z:c.map(e=>-e)}]}function calculateEllipse(e,t,l,o,s,n){null==n&&(n=36);for(var a={x:[],y:[],type:"scatter",legendgroup:"group1"},r=s,d=Math.sin(r),c=Math.cos(r),i=0;i<360;i+=360/n){var u=i*(Math.PI/180),m=Math.sin(u),S=Math.cos(u),h=e+(l*S*c-o*m*d),y=t+(l*S*d+o*m*c);a.x.push(h),a.y.push(y)}return a}function plotResults(e,t,l){e[0];let o=e;let s=calculateEllipse(0,0,o[26],o[27],o[24],50);s.name="id "+l;let n={x:[o[4]],y:[o[5]],z:[o[6]],name:"id "+l,mode:"markers",marker:{size:6,line:{color:"rgba(217, 217, 217, 0.14)",width:.5},opacity:.8},type:"scatter3d",legendgroup:"group1"};t?(Plotly.deleteTraces(ellipsePlot,l-1),Plotly.deleteTraces(spherePlot,l+1),Plotly.addTraces(ellipsePlot,s,l-1),Plotly.addTraces(spherePlot,n,l+1)):(Plotly.addTraces(ellipsePlot,s),Plotly.addTraces(spherePlot,n))}</script> <script>function addEmptyRow(){idx=document.getElementById("customStokesTable").rows.length,addCustomStokesDataRow(idx),addNormalizedStokesDataRow(idx),addIntensityDataRow(idx),addCoherencyDataRow(idx),editCustomStokesRow(null,idx),editNormalizedStokesRow(null,idx),editIntensityRow(null,idx),editCoherencyRow(null,idx)}function addCustomStokesDataRow(e){var t=document.getElementById("customStokesTable").insertRow(e),n=(t.insertCell(0),t.insertCell(1)),i=t.insertCell(2);t.insertCell(3),t.insertCell(4),t.insertCell(5),t.insertCell(6);n.innerHTML="CELL",i.innerHTML="CELL"}function addNormalizedStokesDataRow(e){var t=document.getElementById("normalizedStokesTable").insertRow(e),n=(t.insertCell(0),t.insertCell(1)),i=t.insertCell(2);t.insertCell(3),t.insertCell(4),t.insertCell(5),t.insertCell(6),t.insertCell(7);n.innerHTML="CELL",i.innerHTML="CELL"}function addIntensityDataRow(e){var t=document.getElementById("intensityTable").insertRow(e),n=(t.insertCell(0),t.insertCell(1)),i=t.insertCell(2);t.insertCell(3),t.insertCell(4),t.insertCell(5),t.insertCell(6),t.insertCell(7);n.innerHTML="CELL",i.innerHTML="CELL"}function addCoherencyDataRow(e){var t=document.getElementById("coherencyTable").insertRow(e),n=(t.insertCell(0),t.insertCell(1)),i=t.insertCell(2);t.insertCell(3);n.innerHTML="CELL",i.innerHTML="CELL"}function addResultsDataRow(e){var t=document.getElementById("resultsTable").insertRow(e),n=(t.insertCell(0),t.insertCell(1)),i=t.insertCell(2),l=t.insertCell(3),r=t.insertCell(4),s=t.insertCell(5),d=t.insertCell(6),u=t.insertCell(7);n.innerHTML="CELL",i.innerHTML="CELL",l.innerHTML="CELL",r.innerHTML="CELL",s.innerHTML="CELL",d.innerHTML="CELL",u.innerHTML="-"}function editCustomStokesRow(e,t){let n=document.getElementById("customStokesTable");if(null==e){let e=n.rows[t];e.cells[1].innerHTML="<input type='number' name='S0' id='S0input' min='0' max='1' step='0.01' size='4' value='1' required pattern='S(.*S)?' title='This field is required'>",e.cells[2].innerHTML="<input type='number' name='S1' id='S1input' min='-1' max='1' step='0.01' size='4' value='0.1' required pattern='S(.*S)?' title='This field is required'>",e.cells[3].innerHTML="<input type='number' name='S2' id='S2input' min='-1' max='1' step='0.01' size='4' value='0.2' required pattern='S(.*S)?' title='This field is required'>",e.cells[4].innerHTML="<input type='number' name='S3' id='S3input' min='-1' max='1' step='0.01' size='4' value='-0.3' required pattern='S(.*S)?' title='This field is required'>",e.cells[5].innerHTML="<button class='btn btn-primary btn-sm' onclick='onAddCustomStokes(event)' id='inputCustomStokes'>Submit</button>"}else{e.preventDefault(),disableInputRow(),document.getElementsByName("editRowBtn").forEach(e=>{e.disabled=!0}),document.getElementsByName("removeRowBtn").forEach(e=>{e.disabled=!0});let t=e.target.closest("tr").rowIndex,i=n.rows[t];i.cells[1].innerHTML="<input type='number' name='S0' id='S0edit' min='0' max='1' step='0.01' size='4' value='"+Number(i.cells[1].innerHTML)+"' required pattern='S(.*S)?' title='This field is required'>",i.cells[2].innerHTML="<input type='number' name='S1' id='S1edit' min='-1' max='1' step='0.01' size='4' value='"+Number(i.cells[2].innerHTML)+"' required pattern='S(.*S)?' title='This field is required'>",i.cells[3].innerHTML="<input type='number' name='S2' id='S2edit' min='-1' max='1' step='0.01' size='4' value='"+Number(i.cells[3].innerHTML)+"' required pattern='S(.*S)?' title='This field is required'>",i.cells[4].innerHTML="<input type='number' name='S3' id='S3edit' min='-1' max='1' step='0.01' size='4' value='"+Number(i.cells[4].innerHTML)+"' required pattern='S(.*S)?' title='This field is required'>",i.cells[5].innerHTML="<button class='btn btn-primary btn-sm' onclick='onAddCustomStokes(event)'>Apply</button>"}}function editNormalizedStokesRow(e,t){let n=document.getElementById("normalizedStokesTable");if(null==e){let e=n.rows[t];e.cells[1].innerHTML="<input type='number' name='power' id='powerInput' min='0' max='99' step='0.01' size='3' value='1' required pattern='S(.*S)?' title='This field is required'>",e.cells[2].innerHTML="<input type='number' name='dop' id='dopInput' min='0' max='1' step='0.01' size='3' value='1' required pattern='S(.*S)?' title='This field is required'>",e.cells[3].innerHTML="<input type='number' name='s1' id='s1Input' min='-1' max='1' step='0.01' size='3' value='0' required pattern='S(.*S)?' title='This field is required'>",e.cells[4].innerHTML="<input type='number' name='s2' id='s2Input' min='-1' max='1' step='0.01' size='3' value='0' required pattern='S(.*S)?' title='This field is required'>",e.cells[5].innerHTML="<input type='number' name='s3' id='s3Input' min='-1' max='1' step='0.01' size='3' value='0' required pattern='S(.*S)?' title='This field is required'>",e.cells[6].innerHTML="<button class='btn btn-primary btn-sm' onclick='onAddNormalizedStokes(event)' id='inputNormalizedStokes'>Submit</button>"}else{e.preventDefault(),disableInputRow(),document.getElementsByName("editRowBtn").forEach(e=>{e.disabled=!0}),document.getElementsByName("removeRowBtn").forEach(e=>{e.disabled=!0});let t=e.target.closest("tr").rowIndex,i=n.rows[t];i.cells[1].innerHTML="<input type='number' name='power' id='powerEdit' min='0' max='99' step='0.01' size='3' value='"+Number(i.cells[1].innerHTML)+"' required pattern='S(.*S)?' title='This field is required'>",i.cells[2].innerHTML="<input type='number' name='dop' id='dopEdit' min='0' max='1' step='0.01' size='3' value='"+Number(i.cells[2].innerHTML)+"' required pattern='S(.*S)?' title='This field is required'>",i.cells[3].innerHTML="<input type='number' name='s1' id='s1Edit' min='-1' max='1' step='0.01' size='3' value='"+Number(i.cells[3].innerHTML)+"' required pattern='S(.*S)?' title='This field is required'>",i.cells[4].innerHTML="<input type='number' name='s2' id='s2Edit' min='-1' max='1' step='0.01' size='3' value='"+Number(i.cells[4].innerHTML)+"' required pattern='S(.*S)?' title='This field is required'>",i.cells[5].innerHTML="<input type='number' name='s3' id='s3Edit' min='-1' max='1' step='0.01' size='3' value='"+Number(i.cells[5].innerHTML)+"' required pattern='S(.*S)?' title='This field is required'>",i.cells[6].innerHTML="<button class='btn btn-primary btn-sm' onclick='onAddNormalizedStokes(event)'>Apply</button>"}}function editIntensityRow(e,t){let n=document.getElementById("intensityTable");if(null==e)n.rows[t];else{e.preventDefault(),disableInputRow(),document.getElementsByName("editRowBtn").forEach(e=>{e.disabled=!0}),document.getElementsByName("removeRowBtn").forEach(e=>{e.disabled=!0});let t=e.target.closest("tr").rowIndex;n.rows[t]}}function editCoherencyRow(e,t){let n=document.getElementById("coherencyTable");if(null==e){let e=n.rows[t];e.cells[1].innerHTML="",e.cells[2].innerHTML="<button class='btn btn-primary btn-sm' onclick='onAddCoherency(event)' id='inputCoherency' style='display:none;'>Submit</button> <button class='btn btn-primary btn-sm disabled' disabled='true'>Submit</button>",document.getElementById("inputCoherency").disabled=!0}else{e.preventDefault(),disableInputRow(),document.getElementsByName("editRowBtn").forEach(e=>{e.disabled=!0}),document.getElementsByName("removeRowBtn").forEach(e=>{e.disabled=!0});let t=e.target.closest("tr").rowIndex,i=n.rows[t];i.cells[1].innerHTML="",i.cells[2].innerHTML="<button class='btn btn-primary btn-sm' onclick='onAddCoherency(event)'>Apply</button>"}}</script> <script>function _arrayToHeap(e){var r=e.length*e.BYTES_PER_ELEMENT,f=Module._malloc(r),n=new Uint8Array(Module.HEAPU8.buffer,f,r);return n.set(new Uint8Array(e.buffer)),n}function _heapToArray(e,r){return new Float64Array(e.buffer,e.byteOffset,e.length/r.BYTES_PER_ELEMENT)}function _freeArray(e){Module._free(e.byteOffset)}</script> <script>function processCustomStokes(e,r,a,t,s,o){let y=[];y.push(e),y.push(r),y.push(a),y.push(t);var u=new Float64Array(y),_=_arrayToHeap(u),l=new Float64Array(29),f=new _arrayToHeap(l);o?Module._wasm_editCustomStokes(_.byteOffset,s):Module._wasm_addCustomStokes(_.byteOffset),Module._wasm_getAll(s,f.byteOffset),l=_heapToArray(f,l);let p=Array.from(l);return _freeArray(f),_freeArray(_),p}function processNormalizedStokes(e,r,a,t,s,o,y){let u=[];u.push(e),u.push(r),u.push(a),u.push(t),u.push(s);let _=new Float64Array(u),l=_arrayToHeap(_),f=new Float64Array(29),p=new _arrayToHeap(f);y?Module._wasm_editNormalizedStokes(l.byteOffset,o):Module._wasm_addNormalizedStokes(l.byteOffset),Module._wasm_getAll(o,p.byteOffset),f=_heapToArray(p,f);let n=Array.from(f);return _freeArray(p),_freeArray(l),n}function processIntensity(e,r,a,t,s,o,y,u){let _=[];_.push(e),_.push(r),_.push(a),_.push(t),_.push(s),_.push(o);let l=new Float64Array(_),f=_arrayToHeap(l),p=new Float64Array(29),n=new _arrayToHeap(p);u?Module._wasm_editIntensitySet(f.byteOffset,y):Module._wasm_addIntensitySet(f.byteOffset),Module._wasm_getAll(y,n.byteOffset),p=_heapToArray(n,p);let d=Array.from(p);return _freeArray(n),_freeArray(f),d}</script> <script>function onAddCustomStokes(e){e.preventDefault();let t=e.target.closest("tr").rowIndex,o=t!=document.getElementById("customStokesTable").rows.length-1,a=StokesForm.S0.value,n=StokesForm.S1.value,d=StokesForm.S2.value,l=StokesForm.S3.value;if(a<0)return void alert("Power defined by S_0 parameter can not be negative!");if(n*n+d*d+l*l>a*a)return void alert("Incorrect data provided: the inequality relating square values of Stokes vector elements is not satisfied!");let s=processCustomStokes(a,n,d,l,t,o),u=s.map(function(e){return Number(Math.round(1e3*e)/1e3)});o||addResultsDataRow(t),populateResultsRow(t,u),populateCustomStokesDataRow(t,u),populateNormalizedStokesDataRow(t,u),populateIntensityDataRow(t,u),populateCoherencyDataRow(t,u),t==document.getElementById("customStokesTable").rows.length-1?(addEmptyRow(),updateRowIds(document.getElementById("resultsTable")),updateRowIds(document.getElementById("customStokesTable")),updateRowIds(document.getElementById("normalizedStokesTable")),updateRowIds(document.getElementById("intensityTable")),updateRowIds(document.getElementById("coherencyTable"))):enableInputRow(),plotResults(s,o,t),document.getElementsByName("editRowBtn").forEach(e=>{e.disabled=!1}),document.getElementsByName("removeRowBtn").forEach(e=>{e.disabled=!1})}function onAddNormalizedStokes(e){e.preventDefault();let t=e.target.closest("tr").rowIndex,o=t!=document.getElementById("normalizedStokesTable").rows.length-1,a=StokesNormalizedForm.power.value,n=StokesNormalizedForm.dop.value,d=StokesNormalizedForm.s1.value,l=StokesNormalizedForm.s2.value,s=StokesNormalizedForm.s3.value,u=processNormalizedStokes(a,n,d,l,s,t,o),m=u.map(function(e){return Number(Math.round(1e3*e)/1e3)});o||addResultsDataRow(t),populateResultsRow(t,m),populateCustomStokesDataRow(t,m),populateNormalizedStokesDataRow(t,m),populateIntensityDataRow(t,m),populateCoherencyDataRow(t,m),t==document.getElementById("normalizedStokesTable").rows.length-1?(addEmptyRow(),updateRowIds(document.getElementById("resultsTable")),updateRowIds(document.getElementById("customStokesTable")),updateRowIds(document.getElementById("normalizedStokesTable")),updateRowIds(document.getElementById("intensityTable")),updateRowIds(document.getElementById("coherencyTable"))):enableInputRow(),plotResults(u,o,t),document.getElementsByName("editRowBtn").forEach(e=>{e.disabled=!1}),document.getElementsByName("removeRowBtn").forEach(e=>{e.disabled=!1})}function onAddIntensity(e){e.preventDefault();let t=e.target.closest("tr").rowIndex,o=t!=document.getElementById("intensityTable").rows.length-1,a=IntensityForm.iH.value,n=IntensityForm.iV.value,d=IntensityForm.iD.value,l=IntensityForm.iA.value,s=IntensityForm.iR.value,u=IntensityForm.iL.value,m=processIntensity(a,n,d,l,s,u,t,o),r=m.map(function(e){return Number(Math.round(1e3*e)/1e3)});o||addResultsDataRow(t),populateResultsRow(t,r),populateCustomStokesDataRow(t,r),populateNormalizedStokesDataRow(t,r),populateIntensityDataRow(t,r),populateCoherencyDataRow(t,r),t==document.getElementById("intensityTable").rows.length-1?(addEmptyRow(),updateRowIds(document.getElementById("resultsTable")),updateRowIds(document.getElementById("customStokesTable")),updateRowIds(document.getElementById("normalizedStokesTable")),updateRowIds(document.getElementById("intensityTable")),updateRowIds(document.getElementById("coherencyTable"))):enableInputRow(),plotResults(m,o,t),document.getElementsByName("editRowBtn").forEach(e=>{e.disabled=!1}),document.getElementsByName("removeRowBtn").forEach(e=>{e.disabled=!1})}</script> <script>function populateResultsRow(n,e){let t=document.getElementById("resultsTable").rows[n];t.cells[1].innerHTML=e[21],t.cells[2].innerHTML=e[22],t.cells[3].innerHTML=e[23],t.cells[4].innerHTML=e[24],t.cells[5].innerHTML=e[25],t.cells[6].innerHTML=e[28],e[1]*e[1]+e[2]*e[2]+e[3]*e[3]>0?t.cells[7].innerHTML=determineHelicity(e[3]):t.cells[7].innerHTML="Unpolarized"}function populateCustomStokesDataRow(n,e){let t=document.getElementById("customStokesTable").rows[n];t.cells[1].innerHTML=e[0],t.cells[2].innerHTML=e[1],t.cells[3].innerHTML=e[2],t.cells[4].innerHTML=e[3],t.cells[5].innerHTML="<button class='btn btn-info btn-sm' onclick='editCustomStokesRow(event)' name='editRowBtn'>Edit</button>",t.cells[6].innerHTML="<button class='btn btn-danger btn-sm' onclick='deleteRowAction(event)' name='removeRowBtn'>Remove</button>"}function populateNormalizedStokesDataRow(n,e){let t=document.getElementById("normalizedStokesTable").rows[n];t.cells[1].innerHTML=e[0],t.cells[2].innerHTML=e[21],t.cells[3].innerHTML=e[4],t.cells[4].innerHTML=e[5],t.cells[5].innerHTML=e[6],t.cells[6].innerHTML="<button class='btn btn-info btn-sm' onclick='editNormalizedStokesRow(event)' name='editRowBtn'>Edit</button>",t.cells[7].innerHTML="<button class='btn btn-danger btn-sm' onclick='deleteRowAction(event)' name='removeRowBtn'>Remove</button>"}function populateIntensityDataRow(n,e){let t=document.getElementById("intensityTable").rows[n];t.style="",t.cells[1].innerHTML=e[7],t.cells[2].innerHTML=e[8],t.cells[3].innerHTML=e[9],t.cells[4].innerHTML=e[10],t.cells[5].innerHTML=e[11],t.cells[6].innerHTML=e[12],t.cells[7].innerHTML="<!-- <button class='btn btn-info btn-sm' onclick='editIntensityRow(event)' name='editRowBtn'>Edit</button> <br /> --> <button class='btn btn-danger btn-sm' onclick='deleteRowAction(event)' name='removeRowBtn'>Remove</button>"}function populateCoherencyDataRow(n,e){let t=document.getElementById("coherencyTable").rows[n];t.cells[1].innerHTML="[ "+e[13]+" "+e[14]+"+j"+e[15]+" ] <br /> [ "+e[16]+"+j"+e[17]+" "+e[18]+" ]",t.cells[2].innerHTML="<span class='d-inline-block' tabindex='0' data-toggle='tooltip' title='Disabled tooltip'> <button class='btn btn-info btn-sm' onclick='editCoherencyRow(event)' disabled='true'>Edit</button> </span>",t.cells[3].innerHTML="<button class='btn btn-danger btn-sm' onclick='deleteRowAction(event)' name='removeRowBtn'>Remove</button>"}</script> <script>function disableInputRow(){document.getElementById("inputCustomStokes").disabled=!0,document.getElementById("S0input").disabled=!0,document.getElementById("S0input").name="S0disabled",document.getElementById("S1input").disabled=!0,document.getElementById("S1input").name="S1disabled",document.getElementById("S2input").disabled=!0,document.getElementById("S2input").name="S2disabled",document.getElementById("S3input").disabled=!0,document.getElementById("S3input").name="S3disabled",document.getElementById("inputNormalizedStokes").disabled=!0,document.getElementById("powerInput").disabled=!0,document.getElementById("powerInput").name="powerDisabled",document.getElementById("dopInput").disabled=!0,document.getElementById("dopInput").name="dopDisabled",document.getElementById("s1Input").disabled=!0,document.getElementById("s1Input").name="s1Disabled",document.getElementById("s2Input").disabled=!0,document.getElementById("s2Input").name="s2Disabled",document.getElementById("s3Input").disabled=!0,document.getElementById("s3Input").name="s3Disabled",document.getElementById("inputIntensity").disabled=!0,document.getElementById("IHinput").disabled=!0,document.getElementById("IHinput").name="iHdisabled",document.getElementById("IVinput").disabled=!0,document.getElementById("IVinput").name="iVdisabled",document.getElementById("IDinput").disabled=!0,document.getElementById("IDinput").name="iDdisabled",document.getElementById("IAinput").disabled=!0,document.getElementById("IAinput").name="iAdisabled",document.getElementById("ILinput").disabled=!0,document.getElementById("ILinput").name="iLdisabled",document.getElementById("IRinput").disabled=!0,document.getElementById("IRinput").name="iRdisabled"}function enableInputRow(){document.getElementById("inputCustomStokes").disabled=!1,document.getElementById("S0input").disabled=!1,document.getElementById("S0input").name="S0",document.getElementById("S1input").disabled=!1,document.getElementById("S1input").name="S1",document.getElementById("S2input").disabled=!1,document.getElementById("S2input").name="S2",document.getElementById("S3input").disabled=!1,document.getElementById("S3input").name="S3",document.getElementById("inputNormalizedStokes").disabled=!1,document.getElementById("powerInput").disabled=!1,document.getElementById("powerInput").name="power",document.getElementById("dopInput").disabled=!1,document.getElementById("dopInput").name="dop",document.getElementById("s1Input").disabled=!1,document.getElementById("s1Input").name="s1",document.getElementById("s2Input").disabled=!1,document.getElementById("s2Input").name="s2",document.getElementById("s3Input").disabled=!1,document.getElementById("s3Input").name="s3",document.getElementById("inputIntensity").disabled=!0,document.getElementById("IHinput").disabled=!0,document.getElementById("IHinput").name="iH",document.getElementById("IVinput").disabled=!0,document.getElementById("IVinput").name="iV",document.getElementById("IDinput").disabled=!0,document.getElementById("IDinput").name="iD",document.getElementById("IAinput").disabled=!0,document.getElementById("IAinput").name="iA",document.getElementById("ILinput").disabled=!0,document.getElementById("ILinput").name="iL",document.getElementById("IRinput").disabled=!0,document.getElementById("IRinput").name="iR"}function editCustomStokesRow(e,t){let n=document.getElementById("customStokesTable");if(null==e){let e=n.rows[t];e.cells[1].innerHTML="<input type='number' name='S0' id='S0input' min='0' max='1' step='0.01' size='4' value='1' required pattern='S(.*S)?' title='This field is required'>",e.cells[2].innerHTML="<input type='number' name='S1' id='S1input' min='-1' max='1' step='0.01' size='4' value='0.1' required pattern='S(.*S)?' title='This field is required'>",e.cells[3].innerHTML="<input type='number' name='S2' id='S2input' min='-1' max='1' step='0.01' size='4' value='0.2' required pattern='S(.*S)?' title='This field is required'>",e.cells[4].innerHTML="<input type='number' name='S3' id='S3input' min='-1' max='1' step='0.01' size='4' value='-0.3' required pattern='S(.*S)?' title='This field is required'>",e.cells[5].innerHTML="<button class='btn btn-primary btn-sm' onclick='onAddCustomStokes(event)' id='inputCustomStokes'>Submit</button>"}else{e.preventDefault(),disableInputRow(),document.getElementsByName("editRowBtn").forEach(e=>{e.disabled=!0}),document.getElementsByName("removeRowBtn").forEach(e=>{e.disabled=!0});let t=e.target.closest("tr").rowIndex,i=n.rows[t];i.cells[1].innerHTML="<input type='number' name='S0' id='S0edit' min='0' max='1' step='0.01' size='4' value='"+Number(i.cells[1].innerHTML)+"' required pattern='S(.*S)?' title='This field is required'>",i.cells[2].innerHTML="<input type='number' name='S1' id='S1edit' min='-1' max='1' step='0.01' size='4' value='"+Number(i.cells[2].innerHTML)+"' required pattern='S(.*S)?' title='This field is required'>",i.cells[3].innerHTML="<input type='number' name='S2' id='S2edit' min='-1' max='1' step='0.01' size='4' value='"+Number(i.cells[3].innerHTML)+"' required pattern='S(.*S)?' title='This field is required'>",i.cells[4].innerHTML="<input type='number' name='S3' id='S3edit' min='-1' max='1' step='0.01' size='4' value='"+Number(i.cells[4].innerHTML)+"' required pattern='S(.*S)?' title='This field is required'>",i.cells[5].innerHTML="<button class='btn btn-primary btn-sm' onclick='onAddCustomStokes(event)'>Apply</button>"}}function editNormalizedStokesRow(e,t){let n=document.getElementById("normalizedStokesTable");if(null==e){let e=n.rows[t];e.cells[1].innerHTML="<input type='number' name='power' id='powerInput' min='0' max='99' step='0.01' size='3' value='1' required pattern='S(.*S)?' title='This field is required'>",e.cells[2].innerHTML="<input type='number' name='dop' id='dopInput' min='0' max='1' step='0.01' size='3' value='1' required pattern='S(.*S)?' title='This field is required'>",e.cells[3].innerHTML="<input type='number' name='s1' id='s1Input' min='-1' max='1' step='0.01' size='3' value='0' required pattern='S(.*S)?' title='This field is required'>",e.cells[4].innerHTML="<input type='number' name='s2' id='s2Input' min='-1' max='1' step='0.01' size='3' value='0' required pattern='S(.*S)?' title='This field is required'>",e.cells[5].innerHTML="<input type='number' name='s3' id='s3Input' min='-1' max='1' step='0.01' size='3' value='0' required pattern='S(.*S)?' title='This field is required'>",e.cells[6].innerHTML="<button class='btn btn-primary btn-sm' onclick='onAddNormalizedStokes(event)' id='inputNormalizedStokes'>Submit</button>"}else{e.preventDefault(),disableInputRow(),document.getElementsByName("editRowBtn").forEach(e=>{e.disabled=!0}),document.getElementsByName("removeRowBtn").forEach(e=>{e.disabled=!0});let t=e.target.closest("tr").rowIndex,i=n.rows[t];i.cells[1].innerHTML="<input type='number' name='power' id='powerEdit' min='0' max='99' step='0.01' size='3' value='"+Number(i.cells[1].innerHTML)+"' required pattern='S(.*S)?' title='This field is required'>",i.cells[2].innerHTML="<input type='number' name='dop' id='dopEdit' min='0' max='1' step='0.01' size='3' value='"+Number(i.cells[2].innerHTML)+"' required pattern='S(.*S)?' title='This field is required'>",i.cells[3].innerHTML="<input type='number' name='s1' id='s1Edit' min='-1' max='1' step='0.01' size='3' value='"+Number(i.cells[3].innerHTML)+"' required pattern='S(.*S)?' title='This field is required'>",i.cells[4].innerHTML="<input type='number' name='s2' id='s2Edit' min='-1' max='1' step='0.01' size='3' value='"+Number(i.cells[4].innerHTML)+"' required pattern='S(.*S)?' title='This field is required'>",i.cells[5].innerHTML="<input type='number' name='s3' id='s3Edit' min='-1' max='1' step='0.01' size='3' value='"+Number(i.cells[5].innerHTML)+"' required pattern='S(.*S)?' title='This field is required'>",i.cells[6].innerHTML="<button class='btn btn-primary btn-sm' onclick='onAddNormalizedStokes(event)'>Apply</button>"}}function editIntensityRow(e,t){let n=document.getElementById("intensityTable");if(null==e){n.rows[t].style="display:none"}else{e.preventDefault(),disableInputRow(),document.getElementsByName("editRowBtn").forEach(e=>{e.disabled=!0}),document.getElementsByName("removeRowBtn").forEach(e=>{e.disabled=!0});let t=e.target.closest("tr").rowIndex,i=n.rows[t];i.cells[1].innerHTML="<input type='number' name='iH' id='IHedit' min='0' max='99' step='0.01' size='3' value='"+Number(i.cells[1].innerHTML)+"' required pattern='S(.*S)?' title='This field is required'>",i.cells[2].innerHTML="<input type='number' name='iV' id='IVedit' min='0' max='99' step='0.01' size='3' value='"+Number(i.cells[2].innerHTML)+"' required pattern='S(.*S)?' title='This field is required'>",i.cells[3].innerHTML="<input type='number' name='iD' id='IDedit' min='0' max='99' step='0.01' size='3' value='"+Number(i.cells[3].innerHTML)+"' required pattern='S(.*S)?' title='This field is required'>",i.cells[4].innerHTML="<input type='number' name='iA' id='IAedit' min='0' max='99' step='0.01' size='3' value='"+Number(i.cells[4].innerHTML)+"' required pattern='S(.*S)?' title='This field is required'>",i.cells[5].innerHTML="<input type='number' name='iR' id='IRedit' min='0' max='99' step='0.01' size='3' value='"+Number(i.cells[5].innerHTML)+"' required pattern='S(.*S)?' title='This field is required'>",i.cells[6].innerHTML="<input type='number' name='iL' id='ILedit' min='0' max='99' step='0.01' size='3' value='"+Number(i.cells[6].innerHTML)+"' required pattern='S(.*S)?' title='This field is required'>",i.cells[7].innerHTML="<button class='btn btn-primary btn-sm' onclick='onAddIntensity(event)'>Apply</button> <br /> <button class='btn btn-danger btn-sm' onclick='deleteRowAction(event)' name='removeRowBtn'>Remove</button>"}}function editCoherencyRow(e,t){let n=document.getElementById("coherencyTable");if(null==e){let e=n.rows[t];e.cells[1].innerHTML="",e.cells[2].innerHTML="<button class='btn btn-primary btn-sm' onclick='onAddCoherency(event)' id='inputCoherency'>Submit</button>",document.getElementById("inputCoherency").disabled=!0}else{e.preventDefault(),disableInputRow(),document.getElementsByName("editRowBtn").forEach(e=>{e.disabled=!0}),document.getElementsByName("removeRowBtn").forEach(e=>{e.disabled=!0});let t=e.target.closest("tr").rowIndex,i=n.rows[t];i.cells[1].innerHTML="[ <input type='number' name='J11' id='J11edit' step='0.01' size='3' value='' required pattern='S(.*S)?' title='This field is required'>, <input type='number' name='J12real' id='J12realedit' step='0.01' size='3' value='' required pattern='S(.*S)?' title='This field is required'> + j <input type='number' name='J12imag' id='J12imagedit' step='0.01' size='3' value='' required pattern='S(.*S)?' title='This field is required'> <br /> [ <input type='number' name='J21real' id='J21realedit' step='0.01' size='3' value='' required pattern='S(.*S)?' title='This field is required'> - j <input type='number' name='J21imag' id='J12imagedit' step='0.01' size='3' value='' required pattern='S(.*S)?' title='This field is required'>, <input type='number' name='J22' id='J22edit' step='0.01' size='3' value='' required pattern='S(.*S)?' title='This field is required'>",i.cells[2].innerHTML="<button class='btn btn-primary btn-sm' onclick='onAddCoherency(event)'>Apply</button>"}}function makeCustomStokesRowConstant(e){let t=document.getElementById("customStokesTable").rows[e];t.cells[1].innerHTML=StokesForm.S0.value,t.cells[2].innerHTML=StokesForm.S1.value,t.cells[3].innerHTML=StokesForm.S2.value,t.cells[4].innerHTML=StokesForm.S3.value,t.cells[5].innerHTML="<button class='btn btn-info btn-sm' onclick='editCustomStokesRow(event)' name='editRowBtn'>Edit</button>",t.cells[6].innerHTML="<button class='btn btn-danger btn-sm' onclick='deleteRowAction(event)' name='removeRowBtn'>Remove</button>"}function makeNormalizedStokesRowConstant(e){let t=document.getElementById("normalizedStokesTable").rows[e];t.cells[1].innerHTML=StokesNormalizedForm.power.value,t.cells[2].innerHTML=StokesNormalizedForm.dop.value,t.cells[3].innerHTML=StokesNormalizedForm.s1.value,t.cells[4].innerHTML=StokesNormalizedForm.s2.value,t.cells[5].innerHTML=StokesNormalizedForm.s3.value,t.cells[6].innerHTML="<button class='btn btn-info btn-sm' onclick='editNormalizedStokesRow(event)' name='editRowBtn'>Edit</button>",t.cells[7].innerHTML="<button class='btn btn-danger btn-sm' onclick='deleteRowAction(event)' name='removeRowBtn'>Remove</button>"}function makeIntensityRowConstant(e){let t=document.getElementById("intensityTable").rows[e];t.cells[1].innerHTML=IntensityForm.iH.value,t.cells[2].innerHTML=IntensityForm.iV.value,t.cells[3].innerHTML=IntensityForm.iD.value,t.cells[4].innerHTML=IntensityForm.iA.value,t.cells[5].innerHTML=IntensityForm.iL.value,t.cells[6].innerHTML=IntensityForm.iR.value,t.cells[7].innerHTML="<button class='btn btn-info btn-sm' onclick='editIntensityRow(event)' name='editRowBtn'>Edit</button> <br /> <button class='btn btn-danger btn-sm' onclick='deleteRowAction(event)' name='removeRowBtn'>Remove</button>"}function makeCoherencyRowConstant(e){let t=document.getElementById("coherencyTable").rows[e];t.cells[1].innerHTML=CoherencyForm.J11.value,t.cells[2].innerHTML="<button class='btn btn-info btn-sm' onclick='editCoherencyRow(event)' disabled='true'>Edit</button>",t.cells[3].innerHTML="<button class='btn btn-danger btn-sm' onclick='deleteRowAction(event)' name='removeRowBtn'>Remove</button>"}</script> <script>document.getElementById("mainTab").click(),addEmptyRow(),deletePlaceholderRows();const StokesForm=document.forms.StokesCustom,StokesNormalizedForm=document.forms.StokesNormalizedForm,IntensityForm=document.forms.IntensityForm,CoherencyForm=document.forms.CoherencyForm;StokesForm.onsubmit=function(e){e.preventDefault()},StokesNormalizedForm.onsubmit=function(e){e.preventDefault()},IntensityForm.onsubmit=function(e){e.preventDefault()},CoherencyForm.onsubmit=function(e){e.preventDefault()};const ellipsePlot=document.getElementById("ellipsePlot"),spherePlot=document.getElementById("spherePlot");var interval=setInterval(function(){"complete"===document.readyState&&initializeScriptsOnPage()},0),initializeScriptsOnPage=function(){initializeEllipsePlot(),initializeSpherePlot();let e=document.getElementById("customStokesTable"),t=document.getElementById("intensityTable"),o=document.getElementById("resultsTable");e.setAttribute("class","table table-bordered table-sm table-striped table-hover"),t.setAttribute("class","table table-bordered table-sm table-striped table-hover"),o.setAttribute("class","table table-bordered table-sm table-striped table-hover"),clearInterval(interval)};</script> </article> </div> </div> <footer class="fixed-bottom" role="contentinfo"> <div class="container mt-0"> © Copyright 2024 Ivan Lopushenko. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. Last updated: March 04, 2024. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@4/imagesloaded.pkgd.min.js"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.8/dist/medium-zoom.min.js" integrity="sha256-7PhEpEWEW0XXQ0k6kQrPKwuoIomz8R8IYyuU1Qew4P8=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script defer src="https://unpkg.com/bootstrap-table@1.22.1/dist/bootstrap-table.min.js"></script> <script src="/assets/js/no_defer.js?2930004b8d7fcd0a8e00fdcfc8fc9f24"></script> <script defer src="/assets/js/common.js?4a129fbf39254905f505c7246e641eaf"></script> <script defer src="/assets/js/copy_code.js?7254ae07fe9cc5f3a10843e1c0817c9c" type="text/javascript"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js"></script> <script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script async src="https://www.googletagmanager.com/gtag/js?id=G-LGX85FM6T8"></script> <script>function gtag(){window.dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-LGX85FM6T8");</script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> </body> </html>